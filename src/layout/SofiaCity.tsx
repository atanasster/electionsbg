import { usePartyInfo } from "@/data/usePartyInfo";
import { useRegionVotes } from "@/data/useRegionVotes";
import { Caption } from "@/ux/Caption";
import { Link } from "@/ux/Link";
import { Tooltip } from "@/ux/Tooltip";
import { FC } from "react";
import { PartyVotesXS } from "../screens/components/PartyVotesXS";
import { useTranslation } from "react-i18next";
import { MapCoordinates } from "@/layout/MapLayout";
import { useMediaQueryMatch } from "@/ux/useMediaQueryMatch";

export const SofiaCity: FC<{ size: MapCoordinates }> = ({ size }) => {
  const { topVotesParty } = usePartyInfo();
  const { votesSofia } = useRegionVotes();
  const sofiaVotes = votesSofia();
  const { t } = useTranslation();

  const topWorldParty = topVotesParty(sofiaVotes?.votes);
  const isLarge = useMediaQueryMatch("lg");

  const width: number = isLarge ? 120 : 80;
  const height = 0.7 * width;
  return (
    <Link
      to={`/sofia`}
      style={{
        position: "absolute",
        left: 0,
        top: size[1] - height,
      }}
    >
      <Tooltip
        content={
          <div>
            <Caption>{t("sofia_city")}</Caption>
            <PartyVotesXS votes={sofiaVotes?.votes} />
          </div>
        }
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          overflow="visible"
          className="border-2 rounded-xl hover:border-muted-foreground p-1"
          viewBox="0 500 2000 1000"
          version="1.0"
          width={`${width}px`}
          height={`${height}px`}
        >
          <g
            className="stroke-black"
            strokeWidth={2}
            fill={topWorldParty?.color || "lightgrey"}
          >
            <path
              d="M1963.8,1090.2l-20.3-9h-16.1v-58.8h-8.4v-69.5h-8.4v11.5h-61.1v-8l-32.7-9.7v-11.5h-15.9h-3.1h-15.9v11.5l-32.7,9.7v8H1688
	v-11.5h-8.4v69.5h-8.4v58.8h-9.6v-5.7h-9.3V886h5.5v-25.2h-131.4V886h5.5v189.4h-14.2v-19.2l-11.5-3.3l-12.6-139.6l-70.1-31.5v193.5
	H1413v-14.8h-10.7V859.2h-42.2v-18.1h-7.9h-20h-7.9v18.1h-42.2v201.5h-11.5v14.2h-6.4v-193h-79.7v193h-11.4v6.6h-12V969l-16.4-20.9
	v-9.9h-5.7v10.3l-18.9,20.1h-7.4l-14.8-16v-49.7c0,0-1.2-19.7-22.2-19.7v-9.4h-1.2h-5.3h-1.2v9.4c-20.9,0-22.2,19.7-22.2,19.7v49.7
	l-14.8,16h-7.4l-18.9-20.1v-10.3H999v9.9L982.6,969v112.5h-10.3v-9.3h-8.2v-72.8l-14.8-18.1h-19.7v-25.5H913v-12.3h-6.6v-24.9
	c0,0-5.2-41.5-41.5-41.5v-4.8h-5.3v-10.9h-2.2h-2.7h-2.2v10.9h-5.3v4.8c-36.3,0-41.5,41.5-41.5,41.5v24.9h-6.6v12.3h-9v11.1h-56.4
	v-44.2h-7.1v-41.1h6v-10.9l-22.4-17.5v-11.5H709h-4.9H703v11.5l-22.4,17.5v10.9h6v41.1h-7.1v63.5l-9.9,16.4v69.5h-8.8v7.1h-12.6V892
	h-25.2v-21.4H593v4.9h-30.7v9.3h-25.7v194.3h-7.7v4.9h-6.6v-44.4h-21.9v-33.6h-14.6v-37l-30.2-32.6h-22.9v-6.8h-2.4h-11.2h-2.4v6.8
	H394l-30.2,32.6v37h-14.6v33.6h-21.9v44.4h-13.6l-4.7-191.9h9.8v-11.3h-9.8v-15.9h-7.7v-99.6h-0.6h-5h-0.6v99.6h-7.7v15.9h-9.8v11.3
	h9.8l-4.7,191.9h-10.5v-4.9h-5.5v-63.5h5.5v-7.7L241,1001v-47.6l-16.4-12V932h-8.2v34.5h-15.9l-5.5-10.9h-19.2h-16.4h-19.2
	l-5.5,10.9h-15.9V932h-8.2v9.3l-16.4,12v47.6l-31.2,7.1v7.7h5.5v63.5H57.6v4.4H45l-15.9,7.7v10.4h39.4h90.9h16.4h90.9h15.6h13.4h5
	h13.4h13.1h89.5h16h89.5h14.2h111.7h21.3h18.6h15.9h4.9h34.5h220.6h18.5h86.6h5.3h86.6h23.4h79.7h17.9h50.1h20h50.1h21.1h94.2h14.2
	h120.4h18.9h126.6h3.1h126.6h43.5v-11.5H1963.8z"
            />
            <path
              d="M813,1186.4c-3.7-1.5-8.3-2.9-13.8-4c-0.2,0-0.4-0.1-0.7-0.1c-0.3,0-0.5-0.1-0.7-0.1c-0.2,0-0.3-0.1-0.5-0.1
		c-0.1,0-0.3-0.1-0.5-0.1c-4.7-0.9-8.4-1.8-11-2.7s-4.9-2.2-6.6-4c-1.8-1.8-2.7-4.3-2.7-7.4v-0.1c0-4.5,1.7-8.1,5.2-10.5
		c3.4-2.5,8.3-3.7,14.5-3.7c3.5,0,6.9,0.6,10.3,1.9c3.4,1.3,6.9,3.2,10.3,5.7l7.3-10.1c-3-2.1-6-3.9-9-5.3c-3.1-1.4-6.2-2.4-9.3-3.2
		s-6.3-1.1-9.6-1.1c-6.8,0-12.6,1-17.4,3.1s-8.5,5.1-11,9.1c-2.5,4-3.8,8.8-3.8,14.4v0.1c0,6.4,1.4,11.4,4.1,14.9
		c2.7,3.5,6,5.9,9.8,7.2s8.8,2.5,14.9,3.5l0.9,0.2c0.1,0,0.3,0.1,0.4,0.1c0.1,0,0.3,0,0.4,0.1c4.1,0.8,7.5,1.6,10.1,2.5
		c2.6,0.9,4.7,2.3,6.4,4.1c1.6,1.9,2.5,4.4,2.5,7.5v0.1c0,4.5-1.8,7.9-5.4,10.3s-8.7,3.7-15.3,3.7c-4.9,0-9.4-0.8-13.6-2.3
		s-8-3.8-11.4-6.8l-7.9,9.8c3,2.5,6.1,4.6,9.5,6.3s7.1,2.9,11,3.8c3.9,0.8,8.1,1.3,12.4,1.3c7,0,13.1-1,18-3.1c5-2.1,8.8-5.1,11.4-9
		c2.6-3.9,3.9-8.7,3.9-14.2v-0.1c0-6-1.2-10.7-3.7-14.1C819.8,1190.4,816.7,1187.9,813,1186.4z"
            />
            <path
              d="M925.3,1145.8c-4.8-2.8-10.4-4.2-16.8-4.2c-6.3,0-11.9,1.4-16.8,4.2s-8.6,6.7-11.2,11.8s-4,10.9-4,17.6v25.8
		c0,6.7,1.3,12.5,4,17.6c2.6,5.1,6.4,9,11.2,11.8c4.8,2.8,10.4,4.2,16.8,4.2c6.3,0,11.9-1.4,16.8-4.2c4.8-2.8,8.6-6.7,11.2-11.8
		c2.6-5.1,4-10.9,4-17.6v-25.8c0-6.7-1.3-12.5-4-17.6C933.9,1152.5,930.2,1148.5,925.3,1145.8z M927.5,1201.3
		c0,4.1-0.8,7.7-2.3,10.8c-1.6,3.1-3.8,5.5-6.6,7.2c-2.9,1.7-6.2,2.5-9.9,2.5s-7.1-0.8-9.9-2.5c-2.9-1.7-5.1-4.1-6.6-7.2
		c-1.6-3.1-2.3-6.7-2.3-10.8v-26.6c0-4.1,0.8-7.7,2.3-10.8c1.6-3.1,3.8-5.5,6.6-7.2c2.9-1.7,6.2-2.5,9.9-2.5s7.1,0.8,9.9,2.5
		c2.9,1.7,5.1,4.1,6.6,7.2c1.6,3.1,2.3,6.7,2.3,10.8V1201.3z"
            />
            <polygon
              points="1001.8,1142.5 995.6,1142.5 995.6,1233.5 1008.3,1233.5 1008.3,1195.2 1045.9,1195.2 1045.9,1183.1 1008.3,1183.1 
		1008.3,1154.7 1052.8,1154.7 1052.8,1142.5 1008.3,1142.5 	"
            />
            <rect x="1101.6" y="1142.5" width="12.8" height="90.9" />
            <path
              d="M1226.6,1233.5h13.8l-33.5-90.9H1196l-33.5,90.9h13.8l6.9-19.9h36.7L1226.6,1233.5z M1187.2,1201.4l14.2-41.3l14.2,41.3
		H1187.2z"
            />
          </g>
        </svg>
      </Tooltip>
    </Link>
  );
};
